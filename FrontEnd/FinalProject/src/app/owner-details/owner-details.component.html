<app-navbar></app-navbar>

<div class="margin-top-10">

</div>

<h4 class="text-center">Owner Details Page</h4>

<div class="container-fluid">
    <div class="btn d-flex">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"> Add Data</button>
    </div>
  </div>
<div class="dt-tables">

    

<table id="example2" class="table table-striped table-bordered table-light" style="width:100%">
    <thead>
        <tr>
            <th>No</th>
            <th>Owner Name</th>
            <th>Owner Card Number</th>
            <th>Owner Address </th>
            <th>Owner Status</th>
            <th>Created Date</th>
            <th class="text-center">Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor = "let item of ownerModel; let i=index">
            <td class="text-center">{{i+1}}</td>
            <td>{{item.ownerName}}</td>
            <td>{{item.ownerCardNumber | customCardNumber}}</td>
            <td>{{item.ownerAddress}}</td>
            <td>{{item.status}}</td>
            <td class="text-center">{{item.createdDate | date: 'MM/yy' }}</td>
            <td>
                <button (click)="onEdit(item)" class="btn btn-info" data-toggle="modal" data-target="#editModal">Edit</button> 
                <button (click)="deleteData(item)" class="btn btn-danger mx-3 fa fa-trash"></button>
            </td>
            
        </tr>
    </tbody>
</table>
</div>



<!-- Add data MODAL-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Tambah Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <form [formGroup] = "form.inputData" (ngSubmit)="tambahData()">
            
            <div class="form-group">
              <label >Owner Name</label>
              <input type="text" class="form-control" id="ownerName" placeholder="Enter owner name" name="ownerName" formControlName="ownerName" required>
              <small style="color: red;" *ngIf="ownerName && ownerName.touched && ownerName.invalid" class="small-class form-text">Minimum length is 3 characters.</small>
            </div>
            
            <div class="form-group">
              <label >Owner Card Number</label>
              <input type="text" class="form-control" id="ownerCardNumber" placeholder="Enter owner card number" name="ownerCardNumber" formControlName="ownerCardNumber" required>
              <small style="color: red;" *ngIf="ownerCardNumber && ownerCardNumber.touched && ownerCardNumber.invalid" class="small-class form-text">Length is 16 characters. And input only numbers </small>
            </div>

            <div class="form-group">
              <label >Owner Address</label>
              <input type="text" class="form-control" id="ownerAddress" placeholder="Enter Owner Address" name="ownerAddress" formControlName="ownerAddress" required>
              <small style="color: red;" *ngIf="ownerAddress && ownerAddress.touched && ownerAddress.invalid" class="small-class form-text">Minimum length is 4 characters.</small>
            </div>

            <div class="form-group">
                <label >Status</label>
                <select class="form-select" aria-label="Default select example" formControlName="status" required>
                    <option value="active">Aktif</option>
                    <option value="blocked">Blokir</option>
                  </select>
                <small style="color: red;" *ngIf="status && status.touched && status.invalid" class="small-class form-text">Choose status.</small>
              </div>

            <div class="form-group">
              <label >Created Date</label>
              <input type="date" class="form-control" id="createdDate" placeholder="Enter Created Date" name="createdDate" formControlName="createdDate" required>
              <small style="color: red;" *ngIf="createdDate && createdDate.touched && createdDate.invalid" class="small-class form-text">Input a valid date</small>
            </div>

            <button type="submit" class="btn btn-primary" [disabled]="!form.inputData.valid">Submit</button>
          </form>

        </div>
        <div class="modal-footer">
          <button id="cancel" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


<!-- update data MODAL-->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <form [formGroup] = "form.updateData" (ngSubmit)="editData()">
            
            <div class="form-group">
              <label >Owner Name</label>
              <input type="text" class="form-control" id="ownerName" placeholder="Enter owner name" name="ownerName" formControlName="ownerName" required>
              <small style="color: red;" *ngIf="ownerName2 && ownerName2.touched && ownerName2.invalid" class="small-class form-text">Minimum length is 3 characters.</small>
            </div>
            
            <div class="form-group">
              <label >Owner Card Number</label>
              <input type="text" class="form-control" id="ownerCardNumber" placeholder="Enter owner card number" name="ownerCardNumber" formControlName="ownerCardNumber" required>
              <small style="color: red;" *ngIf="ownerCardNumber2 && ownerCardNumber2.touched && ownerCardNumber2.invalid" class="small-class form-text">Length is 16 characters. And input only numbers</small>
            </div>

            <div class="form-group">
              <label >Owner Address</label>
              <input type="text" class="form-control" id="ownerAddress" placeholder="Enter Owner Address" name="ownerAddress" formControlName="ownerAddress" required>
              <small style="color: red;" *ngIf="ownerAddress2 && ownerAddress2.touched && ownerAddress2.invalid" class="small-class form-text">Minimum length is 4 characters.</small>
            </div>

            <div class="form-group">
                <label >Status</label>
                <select class="form-select" aria-label="Default select example" formControlName="status" required>
                    <option value="active">Aktif</option>
                    <option value="blocked">Blokir</option>
                  </select>
                <small style="color: red;" *ngIf="status2 && status2.touched && status2.invalid" class="small-class form-text">Choose status.</small>
              </div>

            <div class="form-group">
              <label >Created Date</label>
              <input type="date" class="form-control" id="createdDate" placeholder="Enter Created Date" name="createdDate" formControlName="createdDate" required>
              <small style="color: red;" *ngIf="createdDate2 && createdDate2.touched && createdDate2.invalid" class="small-class form-text">Input a valid date</small>
            </div>

            <button type="submit" class="btn btn-primary" [disabled]="!form.updateData.valid">Submit</button>
          </form>

        </div>
        <div class="modal-footer">
          <button id="cancel2" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>